

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RandConditional &mdash; Poisson Approval 0.27.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="RandProfileDiscreteGridUniform" href="reference_rand_profile_discrete_grid_uniform.html" />
    <link rel="prev" title="Random Factories" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Poisson Approval
          

          
          </a>

          
            
            
              <div class="version">
                0.27.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">Poisson Approval</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../reference_constants/index.html">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_containers/index.html">Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_events/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_best_response/index.html">Best Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_tau_vector/index.html">Tau Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_strategies/index.html">Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_profiles/index.html">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_iterables/index.html">Iterables</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Random Factories</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">RandConditional</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_discrete_grid_uniform.html">RandProfileDiscreteGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_discrete_uniform.html">RandProfileDiscreteUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_histogram_grid_uniform.html">RandProfileHistogramGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_histogram_uniform.html">RandProfileHistogramUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_noisy_discrete_grid_uniform.html">RandProfileNoisyDiscreteGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_noisy_discrete_uniform.html">RandProfileNoisyDiscreteUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_ordinal_grid_uniform.html">RandProfileOrdinalGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_ordinal_uniform.html">RandProfileOrdinalUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_twelve_grid_uniform.html">RandProfileTwelveGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_profile_twelve_uniform.html">RandProfileTwelveUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_simplex_grid_uniform.html">RandSimplexGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_simplex_uniform.html">RandSimplexUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_strategy_ordinal_uniform.html">RandStrategyOrdinalUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_strategy_threshold_grid_uniform.html">RandStrategyThresholdGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_strategy_threshold_uniform.html">RandStrategyThresholdUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_strategy_twelve_uniform.html">RandStrategyTwelveUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_tau_vector_grid_uniform.html">RandTauVectorGridUniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference_rand_tau_vector_uniform.html">RandTauVectorUniform</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference_meta_analysis/index.html">Meta-Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference_utils/index.html">Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../history.html">History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Poisson Approval</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Reference</a> &raquo;</li>
        
          <li><a href="index.html">Random Factories</a> &raquo;</li>
        
      <li>RandConditional</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/reference_random_factories/reference_rand_conditional.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="randconditional">
<h1>RandConditional<a class="headerlink" href="#randconditional" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="poisson_approval.RandConditional">
<em class="property">class </em><code class="sig-prename descclassname">poisson_approval.</code><code class="sig-name descname">RandConditional</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">factory</span></em>, <em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">n_trials_max</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/poisson_approval/random_factories/RandConditional.html#RandConditional"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#poisson_approval.RandConditional" title="Permalink to this definition">¶</a></dt>
<dd><p>A random factory of <cite>something</cite> that meets a given test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>factory</strong> (<em>callable</em><em> or </em><em>tuple</em>) – <p>This can be:</p>
<ul>
<li><p>Either a callable that takes no input and that outputs a (random) <cite>something</cite>,</p></li>
<li><p>Or a tuple of such factories (cf. examples below).</p></li>
</ul>
</p></li>
<li><p><strong>test</strong> (<em>callable</em>) – A function that take as input(s) the output(s) of the factory(ies) and that returns a Boolean.</p></li>
<li><p><strong>n_trials_max</strong> (<em>int</em><em> or </em><em>None</em>) – The maximum number of trials. If None, then attempts will be made until finding an example. The option None
should be used with extreme care since it may lead to an infinite loop.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If there is one factory, then return a <cite>something</cite> that meets the given <cite>test</cite>. If there is a tuple of
factories, then return a tuple of generated objects that meets the given <cite>test</cite>. In both cases, if no example
is found within <cite>n_trials_max</cite> attempts, then return None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>object or tuple or None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>In this basic example with one factory, we generate a random integer between 0 included and 100 excluded that
is divisible by 7:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initialize_random_seeds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rand_integer</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test_divisible_7</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">==</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_conditional</span> <span class="o">=</span> <span class="n">RandConditional</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="n">rand_integer</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">test</span><span class="o">=</span><span class="n">test_divisible_7</span><span class="p">,</span> <span class="n">n_trials_max</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_conditional</span><span class="p">()</span>
<span class="go">21</span>
</pre></div>
</div>
<p>In this example with a tuple of factories, we generate a random 2*2 matrix and a random vector of size 2, both
with integer coefficients between -10 included and 11 excluded, such that their dot product is null, but without
being null themselves:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">initialize_random_seeds</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rand_matrix</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rand_vector</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test_non_trivial_dot_zero</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>            <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">matrix</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">vector</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_conditional</span> <span class="o">=</span> <span class="n">RandConditional</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="p">(</span><span class="n">rand_matrix</span><span class="p">,</span> <span class="n">rand_vector</span><span class="p">),</span>
<span class="gp">... </span>                                   <span class="n">test</span><span class="o">=</span><span class="n">test_non_trivial_dot_zero</span><span class="p">,</span> <span class="n">n_trials_max</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span> <span class="o">=</span> <span class="n">rand_conditional</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">matrix</span>
<span class="go">array([[ 2, -8],</span>
<span class="go">       [-1,  4]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vector</span>
<span class="go">array([-4, -1])</span>
</pre></div>
</div>
<p>When no example is found, the factory returns None:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">rand_integer</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">is_negative</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_conditional</span> <span class="o">=</span> <span class="n">RandConditional</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="n">rand_integer</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">test</span><span class="o">=</span><span class="n">is_negative</span><span class="p">,</span> <span class="n">n_trials_max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">rand_conditional</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference_rand_profile_discrete_grid_uniform.html" class="btn btn-neutral float-right" title="RandProfileDiscreteGridUniform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Random Factories" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, François Durand

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>